#!/bin/bash

prefix=$1
sourceLanguage=$2
targetLanguage=$3

mkdir -p build/$prefix/frames
prefixFile="build/$prefix-$targetLanguage.ttml"
echo "prefixFile: " $prefixFile

if [ $targetLanguage == "tr"  ]; then
    if [ ! -f build/$prefix-$targetLanguage.vtt ]; then
        python ttml2srt.py build/$prefix-$targetLanguage.ttml > build/$prefix-$targetLanguage.srt
        ffmpeg -y -i build/$prefix-$targetLanguage.srt build/$prefix-$targetLanguage.vtt
        rm build/$prefix-$targetLanguage.srt
    fi
fi
python3 dictionary.py $prefix $targetLanguage
python cut.py $prefix $targetLanguage
#exit 0
python3 video2frames.py $prefix $targetLanguage
python3 editframes.py $prefix $targetLanguage
python3 frames2video.py $prefix $targetLanguage
#python3 sayWords.py $prefix 2 $targetLanguage
#python3 video2image.py $prefix $targetLanguage
#python3 audio2video.py $prefix $targetLanguage
python combine.py $prefix $targetLanguage "c"

python3 subtitleWords.py $prefix $targetLanguage "c"
#exit 0
python3 subtitles.py $prefix $targetLanguage "c"
