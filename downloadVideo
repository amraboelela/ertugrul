season=$1
episode=$2
paddedEpisode=`printf %02d $episode`
language=$3
url=$4
mkdir -p data
if [ ! -f data/ertugrul-$season-$paddedEpisode-en.vtt ]; then
    youtube-dl --all-subs --skip-download $url
    if [ $language == "tr" ]; then
        mv Resurrection\ Ertugrul\ Season\ $season\ Episode\ $episode-*.vtt data/ertugrul-$season-$paddedEpisode-en.vtt
    fi
fi
if [ ! -f data/ertugrul-$season-$paddedEpisode-$language.jpg ]; then
    youtube-dl --write-thumbnail --skip-download $url
    if [ $language == "tr" ]; then
        mv Resurrection\ Ertugrul\ Season\ $season\ Episode\ $episode-*.jpg data/ertugrul-$season-$paddedEpisode-$language.jpg
    elif [  $language == "ar" ]; then
        mv *\ $episode*.jpg data/ertugrul-$season-$paddedEpisode-$language.jpg
    fi
fi
if [ ! -f data/ertugrul-$season-$paddedEpisode-o$language.m4a ]; then
    youtube-dl -f 140 $url
    if [ $language == "tr" ]; then
        mv Resurrection\ Ertugrul\ Season\ $season\ Episode\ $episode-*.m4a data/ertugrul-$season-$paddedEpisode-o$language.m4a
    elif [  $language == "ar" ]; then
        mv *\ $episode*.m4a data/ertugrul-$season-$paddedEpisode-o$language.m4a
    fi
fi
if [ ! -f data/ertugrul-$season-$paddedEpisode-o$language.mp4 ]; then
    youtube-dl $url
    if [ -f Resurrection\ Ertugrul\ Season\ $season\ Episode\ $episode-*.mkv ]; then
        handbrakecli -i Resurrection\ Ertugrul\ Season\ $season\ Episode\ $episode-*.mkv -o Resurrection\ Ertugrul\ Season\ $season\ Episode\ $episode-.mp4
        rm Resurrection\ Ertugrul\ Season\ $season\ Episode\ $episode-*.mkv
    fi
    if [ $language == "tr" ]; then
        mv Resurrection\ Ertugrul\ Season\ $season\ Episode\ $episode-*.mp4 data/ertugrul-$season-$paddedEpisode-o$language.mp4
    elif [  $language == "ar" ]; then
        mv *\ $episode*.mp4 data/ertugrul-$season-$paddedEpisode-o$language.mp4
    fi
fi
